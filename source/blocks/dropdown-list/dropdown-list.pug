include ../input-field/input-field.pug
include ../button/button.pug

mixin dropdown-list({ listItems = [], labelText, inputName, inputPlaceholder, withButtons = false, active = false } = {})
  -
    const blockName = 'dropdown-list';
    const wrapperClass = [blockName, `js-${blockName}`, withButtons && `${blockName}_wide`];
    const inputClass = [`${blockName}__input`, `js-${blockName}__input`];
    const iconClass = ['material-icons', `${blockName}__icon`, `js-${blockName}__icon`];
    const listClass = [`${blockName}__list`, `js-${blockName}__list`];
    const itemClass = [`${blockName}__item`, `js-${blockName}__item`];
    const itemButtonClass = [`${blockName}__item-button`, `js-${blockName}__item-button`];
    const itemCounterClass = [`${blockName}__item-counter`, `js-${blockName}__item-counter`];
    const resetButtonClass = [`${blockName}__button`, `${blockName}__button_reset`, `js-${blockName}__button_reset`];
    const acceptButtonClass = [`${blockName}__button`, `${blockName}__button_accept`, `js-${blockName}__button_accept`];

  div(class=wrapperClass, data-active=active)
    div(class=inputClass)
      +input-field({labelText: labelText})(name=inputName, placeholder=inputPlaceholder, readonly)
      i(class=iconClass) expand_more
    div(class=listClass)
      each item in listItems
        div(
          class=itemClass,
          data-names=item.names.join(','),
          data-value=item.value,
          data-min-value=item.minValue,
          data-max-value=item.maxValue,
          data-combined=item.combined
        )
          span(class=`${blockName}__item-name`) #{item.title}
          span(class=`${blockName}__item-controls`)
            button(class=itemButtonClass, type='button') -
            span(class=itemCounterClass) #{item.value}
            button(class=itemButtonClass, type='button') +
      if (withButtons)
        div(class=`${blockName}__buttons`)
          div(class=resetButtonClass)
            +button({ buttonText: 'Очистить', buttonStyle: 'as-text as-text_faint' })
          div(class=acceptButtonClass)
            +button({ buttonText: 'Применить', buttonStyle: 'as-text' })
